---
import sun from "@images/sun.svg";
import moon from "@images/moon.svg";
---

<div class="flex items-start mb-4">
  <img src={moon} alt="" class="cursor-pointer moon" />
  <img src={sun} alt="" class="cursor-pointer sun" />
</div>

<script>
  const sunIcon = document.querySelector(".sun");
  const moonIcon = document.querySelector(".moon");
  const userTheme = localStorage.getItem("theme");
  const systemTheme = window.matchMedia("(prefers-color-scheme: dark)").matches;

  const iconToggle = () => {
    moonIcon.classList.toggle("display-none");
    sunIcon.classList.toggle("display-none");
  };

  const themeCheck = () => {
    if (userTheme === "dark" || (!userTheme && systemTheme)) {
      document.documentElement.classList.add("dark");
      moonIcon.classList.add("display-none");
      return;
    }
    sunIcon.classList.add("display-none");
  };

  const themeSwitch = () => {
    if (document.documentElement.classList.contains("dark")) {
      document.documentElement.classList.remove("dark");
      localStorage.setItem("theme", "light");
      iconToggle();
      return;
    }
    document.documentElement.classList.add("dark");
    localStorage.setItem("them", "dark");
    iconToggle;
  };

  sunIcon.addEventListener("click", () => {
    themeSwitch();
  });
  moonIcon.addEventListener("click", () => {
    themeSwitch();
  });
  themeCheck();
</script>
